---
title: "Deno ã® CLI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§è‡ªèº«ã‚’æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æ›´æ–°ã™ã‚‹æŠ€"
emoji: "ğŸ¦•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["deno", "typescript"]
published: true
---

Deno ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’åå‰ã‚’ã¤ã‘ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
Aleph.js ã® `aleph` ã‚„ Velociraptor ã® `vr` ãªã©ã¯ãã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

https://deno.land/manual/tools/script_installer#script-installer

ä¾‹ãˆã°ã€ [Velociraptor ã®ä¾‹](https://velociraptor.run/docs/installation/)ã§ã¯ã€

```bash:bash
deno install -qAn vr https://deno.land/x/velociraptor@1.4.0/cli.ts
```

ã¨ã™ã‚‹ã“ã¨ã§ã€`vr` ã¨ã„ã†åå‰ã§ `https://deno.land/x/velociraptor@1.4.0/cli.ts` ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚
ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã® `q` ã¯ `quiet` ã¨ã„ã†æ„å‘³ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®ãƒ­ã‚°ã‚’éš ã—ã€`A` ã¯ã„ã¤ã‚‚ã® `deno run -A` ã¨åŒã˜ã§ã€å®Ÿè¡Œæ™‚ã®æ¨©é™ã‚’å…¨ã¦è¨±å¯ã—ã€`n` ã¯ `name` ã¨ã„ã†æ„å‘³ã§ã€å¾Œã‚ã«æŒ‡å®šã—ãŸåå‰ã‚’ä»˜ã‘ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
ä¸Šæ›¸ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆã¯ã€`f` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹éš›ã¯ã€

```bash:bash
deno uninstall vr
```

ã§ã„ã‘ã¾ã™ã€‚

ã—ã‹ã—ã€ã“ã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‚ã®ã‚’æœ€æ–°ç‰ˆã«æ›´æ–°ã—ãŸã„ã¨ã„ã†ã¨ãã«ã¯å°‘ã—å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚

**`deno.land` ã§å…¬é–‹ã—ã¦ã„ã‚‹å‰æ**ã§é€²ã‚ã¾ã™ã€‚
ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å…¬é–‹æ–¹æ³•ã¯ã€[å…¬å¼ã®è§£èª¬](https://deno.land/add_module) ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

## ã†ã¾ãã„ã‹ãªã„æ–¹æ³•

æœ€æ–°ç‰ˆã«æ›´æ–°ã™ã‚‹æ–¹æ³•ã¯ã€Deno ã®æ©Ÿèƒ½ã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ãªã„ã®ã§è‡ªåˆ†ã§å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã¾ãšã€æ€ã„ã¤ãã®ã¯æ¬¡ã®ã‚ˆã†ãªæ–¹æ³•ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

```ts:install.ts
// è‡ªèº«ã®æœ€æ–°ç‰ˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
const upgradeSelf = () => {
    Deno.run({
        cmd: [
            Deno.execPath(), // ä»Šä½¿ã‚ã‚Œã¦ã„ã‚‹ deno ã®ãƒã‚¤ãƒŠãƒªã®ãƒ‘ã‚¹
            "install",
            "-fqAn", // ä¸Šæ›¸ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãªã®ã§ -f ã‚’è¿½åŠ 
            "your_module", // åå‰
            "https://deno.land/x/[your_module]/cli.ts" // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãªã„
        ]
    })
}
```

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãªã‘ã‚Œã°è‡ªå‹•ã§æœ€æ–°ç‰ˆãŒä½¿ã‚ã‚Œã‚‹ã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒãã†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
åŸºæœ¬çš„ã«ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚‚ã®ãŒä½¿ã‚ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚

ãã®ãŸã‚ã€è‡ªåˆ†ã§æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¿ã‚°ã‚’è¦‹ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
æ¬¡ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ã†ã¾ãã„ãæ–¹æ³•

```ts:install.ts
// è‡ªèº«ã®æœ€æ–°ç‰ˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
const upgradeSelf = async () => {

    // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã›ãšã« fetch ã™ã‚‹
    const res = await fetch("https://deno.land/x/[your_module]/")

    console.log(res)
    /*
    Response {
        body: ReadableStream { locked: false },
        bodyUsed: false,
        headers: Headers {
            "access-control-allow-origin": "*",
            "content-length": "13",
            "content-type": "text/plain;charset=UTF-8",
            date: "Mon, 20 Jun 2022 02:08:51 GMT",
            server: "deno/asia-northeast1-a",
            vary: "Accept-Encoding"
        },
        ok: false,
        redirected: true,
        status: 404,
        statusText: "Not Found",
        url: "https://deno.land/x/[your_module]@v0.0.9"
    }
    */

    const url = res.url

    console.log(url) // https://deno.land/x/[your_module]@v0.0.9

    Deno.run({
        cmd: [
            Deno.execPath(),
            "install",
            "-fqAn",
            "your_module",
            `${url}/cli.ts`
        ]
    })
}
```

é€šå¸¸ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã›ãšã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå ´åˆã€æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã®ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãªã„ã§ `fetch()` ã—ãŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ 404 ã«ãªã‚Šã€æœ¬æ¥ã‚¢ã‚¯ã‚»ã‚¹ã™ã¹ã URL ã‚‚ä¸€ç·’ã«æ¸¡ã•ã‚Œã¾ã™ã€‚

ãã® URL ã‚’ä½¿ã†ã“ã¨ã§æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

`deno.land` ã®ä»•æ§˜ãŒå¤‰ã‚ã£ãŸã‚‰ä½¿ãˆãªããªã£ã¦ã—ã¾ã„ã¾ã™ãŒã€è€ƒãˆæ–¹çš„ã«ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã‚„ã‚Œã°æœ€æ–°ã‚¿ã‚°ã‚’ç°¡å˜ã«å–å¾—ã§ãã¾ã™ã€‚
è‡ªåˆ†ã§åˆ¥ã®ã‚µãƒ¼ãƒãƒ¼ã‚’ç”¨æ„ã—ãŸã‚Šã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰ãˆã‚‹ã”ã¨ã«ä½•ã‹ã‚’æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒãªã„ã®ã§æ¥½ã§ã™ã€‚
